# HybridSystem

## 📌 프로젝트 개요

HybridSystem은 제조·물류 환경에서 **이미지 센서 기반 검사와 바코드 인식**을 결합하여 불량을 자동 판정하는 **C# 기반 하이브리드 검사 시스템**입니다.

단일 인식 방식의 한계를 보완하기 위해 **AI 분류 모델과 룰 기반 검증 로직**을 결합하여 판정 신뢰도를 높이고, 검사 결과를 로그 및 외부 시스템과 연동할 수 있도록 설계되었습니다.

---

## 🎯 개발 배경

제조 현장에서는 이미지 검사 또는 바코드 인식 중 하나만 사용하는 경우가 많아 다음과 같은 문제가 발생합니다.

* 이미지 검사 단독 사용 시 오검출 발생
* 바코드 인식 오류 시 전체 공정 중단
* 수동 판정 의존으로 인한 작업자 피로 및 편차

HybridSystem은 이러한 문제를 해결하기 위해 **복수의 판정 기준을 결합한 자동 검사 구조**를 목표로 개발되었습니다.

---

## ⚙️ 시스템 동작 흐름

1. 산업용 카메라를 통해 검사 대상 이미지 캡처
2. 이미지 전처리 (노이즈 제거, ROI 추출)
3. ONNX Runtime 기반 AI 모델을 통한 분류 수행
4. 바코드 인식 결과 및 룰 기반 조건과 결합
5. 최종 OK / NG 및 불량 유형(B1/B2/B3) 판정
6. 검사 결과를 로그(JSON/DB)로 저장
7. REST API 또는 TCP를 통해 외부 시스템(MES/서버) 연동

---

## 🧠 핵심 특징

* **하이브리드 판정 구조**: AI 분류 + 룰 기반 검증 결합
* **확장성 고려 설계**: 외부 MES/서버 연동 가능
* **운영 친화적 구조**: 검사 이력 로그 및 이미지 스냅샷 저장
* **신뢰도 개선**: 단일 검사 방식 대비 오판율 감소 목표

---

## 🛠️ 사용 기술

* Language: C#
* Framework: .NET
* Image Processing: OpenCV
* AI Inference: ONNX Runtime
* Data Handling: JSON, DB Logging
* Communication: REST API / TCP

---

## 📁 프로젝트 구조 (요약)

```
HybridSystem/
 ├─ Core/              # 판정 로직 및 공통 모듈
 ├─ Vision/            # 이미지 처리 및 AI 추론
 ├─ Barcode/           # 바코드 인식 모듈
 ├─ Communication/     # 서버/MES 연동
 ├─ Logging/           # 검사 결과 로그 관리
 └─ UI/                # 검사 상태 확인 UI
```

------------------------

## 26/1/13 하드웨어 부분 추가

*실제 하드웨어가 없는 상태에서도 시스템 동작을 점검하기위해 시뮬레이션 기반으로 설계했습니다.

## Firmware / PLC

* IDLE: 검사 트리거 대기
* INSPECT: AI 추론 및 이미지 캡쳐 수행 
* RESULT: OK, FAIL 결과 처리 후 대기 상태 복귀

## 동작 시나리오

1. 트리거 입력
	- 센서 또는 외부 신호를 통해 검사 시작
2. 카메라 이미지 획득
	- 이미지 캡쳐 후 파일 업로드
3. 바코드 데이터 수신
	- 바코드 -> 문자열 변환
4. AI 추론 실행
	- 이미지 정상/ 불량 계산
5. 최종 결과 출력
	- OK, FAIL 결정
		=> 두 결과 모두 통과시 OK 판정 
6. PLC 상태 복귀
	- 결과 검사 출력 후 다음 검사 대기 변경

=> 대기 -> 트리거 입력 -> 이미지 캡쳐 -> AI 추론 실행 -> 결과 통보 -> 대기 